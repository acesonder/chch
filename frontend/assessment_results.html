<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assessment Results</title>
    <link rel="stylesheet" href="styles.css">
    <script src="scripts.js" defer></script>
</head>
<body>
    <div class="container">
        <h1>Assessment Results</h1>
        <div class="assessment-summary">
            <h2>Summary of Needs</h2>
            <p id="summary"></p>
        </div>
        <div class="assessment-recommendations">
            <h2>Recommended Support Services</h2>
            <p id="recommendations"></p>
        </div>
        <div class="assessment-priority-areas">
            <h2>Priority Areas for Intervention</h2>
            <p id="priority-areas"></p>
        </div>
        <div class="assessment-severity-ratings">
            <h2>Severity Ratings by Category</h2>
            <p id="severity-ratings"></p>
        </div>
        <div class="export-pdf">
            <button id="export-pdf">Export as PDF</button>
        </div>
    </div>
    <script>
        // JavaScript code to fetch and display assessment results
        document.addEventListener('DOMContentLoaded', function() {
            const summary = document.getElementById('summary');
            const recommendations = document.getElementById('recommendations');
            const priorityAreas = document.getElementById('priority-areas');
            const severityRatings = document.getElementById('severity-ratings');
            const exportPdfButton = document.getElementById('export-pdf');

            // Fetch assessment results from the server
            fetch('/backend/get_assessment_results.php')
                .then(response => response.json())
                .then(data => {
                    summary.textContent = data.summary;
                    recommendations.textContent = data.recommendations;
                    priorityAreas.textContent = data.priority_areas;
                    severityRatings.textContent = data.severity_ratings;
                })
                .catch(error => {
                    console.error('Error fetching assessment results:', error);
                });

            // Handle PDF export functionality
            exportPdfButton.addEventListener('click', function() {
                fetch('/backend/export_assessment_as_pdf.php')
                    .then(response => {
                        if (response.ok) {
                            return response.blob();
                        } else {
                            throw new Error('Failed to export PDF');
                        }
                    })
                    .then(blob => {
                        const url = window.URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = 'assessment_results.pdf';
                        document.body.appendChild(a);
                        a.click();
                        a.remove();
                    })
                    .catch(error => {
                        console.error('Error exporting PDF:', error);
                    });
            });
        });
    </script>
</body>
</html>
